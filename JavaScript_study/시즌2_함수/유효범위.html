<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>유효범위(scope)</title>
</head>
<body>
  <!--

  @유효범위(Scope) : 변수의 수명을 의미.

  @지역변수와 전역변수
  지역변수 Scope: 함수 안.
  전역변수 Scope: 에플리케이션 전역.
  지역변수와 전역변수가 동시에 정의된 경우 : 더 가까이 위치한 지역변수를 우선시한다.

  var vscope = 'global'; //전역변수
  function fscope(){
      var vscope = 'local'; //지역변수
      alert('함수안 '+vscope); //local
  }
  fscope();
  alert('함수밖 '+vscope);//global

  @지역변수의 유효범위
  var vscope = 'global';
  function fscope(){
      var vscope = 'local';
      var lv = 'local variables';
      alert('함수안'+vscope); //local
  }
  fscope();
  alert('함수밖'+vscope); //local
  alert(lv); //undefined : 지역변수는 해당 지역에서만 접근가능함.

  @var을 쓰는 것과 쓰지 않는 것의 차이점
  //var을 썼을 때
  var vscope = 'global';
  function fscope(){
      var vscope = 'local';
  }
  fscope()
  alert(vscope); //global

  //var을 쓰지 않았을 때 1
  var vscope = 'global';
  function fscope(){
      vscope = 'local';
      //var을 빼면 전역변수에 local을 return해주는 것이 됨.
  }
  fscope()
  alert(vscope); //local

  //var을 쓰지 않았을 때 2
  변수를 선언할 때는 꼭 var을 붙이는 것을 습관화해야 한다.
  전역변수를 사용해야 하는 경우라면 그것을 사용하는 이유를 명확히 알고 있을 때 사용하도록 하자.

  var vscope = 'global';
  function fscope(){
      var vscope = 'local';
      vscope = 'local';
      //지역변수가 있기 때문에 지역변수의 값을 local로 바꿔주는 것.
  }
  fscope()
  alert(vscope); //따라서 전역변수의 global이 호출이 된다.


  @유효범위의 효용
  //var을 붙인 경우
  <script type="text/javascript">
  function a (){
      var i = 0;
  }
  for(var i = 0; i < 5; i++){
      a();
      document.write(i); // 0 1 2 3 4
  }

  //var 안붙인 경우
  function a (){
      i = 0;//var 안붙이면 for구문의 i도 0이 됨.
  }
  for(var i = 0; i < 5; i++){
      a();
      document.write(i); //변수가 0이니까 5보다 커지지 않아서 무한루프돌게 됨.
  }

  @ 전역변수의 사용
  // 하나의 객체를 전역변수로 만들고 객체의 속성으로 변수를 관리하는 방법
  MYAPP = {}
  MYAPP.calculator = {
      'left' : null,
      'right' : null
  }
  MYAPP.coordinate = {
      'left' : null,
      'right' : null
  }
  MYAPP.calculator.left = 10;
  MYAPP.calculator.right = 20;

  function sum(){
      return MYAPP.calculator.left + MYAPP.calculator.right;
  }
  console.log(sum()); // 30

  //익명함수를 호출해서 전역변수 사용안하는 방법
  (function(){ //괄호감싸면 var MTAPP의 함수가 됨.
    var MYAPP = {}
    MYAPP.calculator = {
        'left' : null,
        'right' : null
    }
    MYAPP.coordinate = {
        'left' : null,
        'right' : null
    }
    MYAPP.calculator.left = 10;
    MYAPP.calculator.right = 20;
    function sum(){
        return MYAPP.calculator.left + MYAPP.calculator.right;
    }
    document.write(sum()); // 30
    }())

    @유효범위의 대상 (함수) :javascript는 함수에 대한 유효범위만을 제공한다
    for(var i = 0; i < 1; i++){
    var name = 'coding everybody';
    }
    alert(name);   // coding everybody

    @ 정적 유효범위(=static scoping =lexical scoping)
    //javascript는 함수가 선언된 시점에서의 유효시점을 갖는다.
  -->
<script type="text/javascript">

var i = 5;
function a(){
    var i = 10;
    b();
    console.log("function a의 i: " + i);//10
}
function b(){
    console.log("function b의 i: " + i);//5
}
a();


</script>
</body>
</html>
